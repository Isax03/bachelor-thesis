% \documentclass[a4paper, 11pt, titlepage, twoside, openany]{book}
\documentclass[a4paper, 11pt, titlepage, oneside, hidelinks]{book}
\usepackage{plain}
\usepackage{setspace}

\usepackage{threeparttable}
\usepackage{multirow}
\usepackage{booktabs}

\usepackage{float}
\usepackage{makecell}
\usepackage[table]{xcolor}
\usepackage{listings}
\renewcommand{\lstlistingname}{Codice}
% Layout
\usepackage[
  paperheight=29.7cm,
  paperwidth=21cm,
  outer=1.5cm,
  inner=2.5cm,
  top=2cm,
  bottom=2cm
]{geometry}
% Chapter
\usepackage{titlesec}
\singlespacing
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}
% Letter
\usepackage[utf8]{inputenc}
% Language
\usepackage[italian]{babel}
% PDF/A
\usepackage[a-1b]{pdfx}
% Image
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{stackengine}
\usepackage{etoolbox}
\BeforeBeginEnvironment{wrapfigure}{\setlength{\intextsep}{0pt}}
% Hyperlink
\usepackage{xurl}
\usepackage[pdfa]{hyperref}
\hypersetup{breaklinks=true}
% Capitalize autoref names
\addto\extrasitalian{%
\renewcommand{\sectionautorefname}{Sezione}%
\renewcommand{\subsectionautorefname}{Sottosezione}%
\renewcommand{\subsubsectionautorefname}{Sottosottosezione}%
}
% List
\usepackage{enumitem}

\lstset{ basicstyle=\ttfamily\small, breaklines=true, backgroundcolor=
\color{gray!10}
, frame=single, rulecolor=
\color{gray}
, captionpos=b, columns=fullflexible, }

\lstset{ language=C, basicstyle=\footnotesize\ttfamily, % <== piÃ¹ piccolo di \small
keywordstyle=
\color{blue}
, commentstyle=
\color{green!60!black}
, stringstyle=
\color{red}
, numberstyle=\tiny
\color{gray}
, numbers=left, frame=single, breaklines=true, breakatwhitespace=false,
showstringspaces=false, captionpos=b % caption sotto il codice
}

\lstdefinestyle{bash}{ language=bash, basicstyle=\footnotesize\ttfamily,
keywordstyle=
\color{blue}
\bfseries, commentstyle=
\color{green!60!black}
\itshape, stringstyle=
\color{red}
, numberstyle=\tiny
\color{gray}
, numbers=left, frame=single, breaklines=true, breakatwhitespace=false, showstringspaces=false,
captionpos=b, morekeywords={sudo, chmod, chown, grep, awk, sed, find, xargs, tar, gzip, curl, wget},
morecomment=[l]{\#}, morestring=[b]", morestring=[b]' }

\lstdefinestyle{changes_in_c}{ language=C, moredelim=**[is][
\color{green!40!black}
]{@}{@} }
% Document
\begin{document}
  % Cover
  \pagenumbering{gobble}
  \input{etc/cover}
  \clearpage

  % Acknowledgements
  \input{etc/acknowledgements}
  \clearpage
  \pagestyle{plain}

  % Table of Contents
  \frontmatter
  \pagenumbering{Roman}
  \tableofcontents
  \clearpage
  \begingroup
  \pagestyle{empty}
  \cleardoublepage
  \endgroup

  % Start page numbering
  \mainmatter

  % Group to define space between chapters
  \begingroup
  % Override format of title chapter
  \titleformat{\chapter} {\normalfont\Huge\bfseries}{\thechapter}{1em}{} \titlespacing*{\chapter}{0pt}{0.59in}{0.02in}
  \titlespacing*{\section}{0pt}{0.20in}{0.02in} \titlespacing*{\subsection}{0pt}{0.10in}{0.02in}
  \titlespacing*{\subsubsection}{0pt}{0.05in}{0.02in}

  % Abstract
  \input{etc/abstract.tex}

  % Chapters

  \input{chapters/introduction.tex}

  \input{chapters/background/background.tex}

  \input{chapters/sdlc/sdlc.tex}

  \input{chapters/real_case/real_case.tex}

  % Conclusions
  \input{etc/conclusions.tex}

  \endgroup

  \clearpage
  \phantomsection

  % Bibliography
  \addcontentsline{toc}{chapter}{Bibliografia}
  % Alphabetical order of authors
  \bibliographystyle{plain} % plain for alphabetical order, unsrt for order of appearance
  \bibliography{bibliography.bib}

  % Attachments
  \titleformat{\chapter} {\normalfont\Huge\bfseries}{Appendice \thechapter}{1em}{}
  \appendix
  \input{attachments/prompt.tex}
  \input{attachments/asan_output.tex}
  \input{attachments/sei_cert_example.tex}
\end{document}